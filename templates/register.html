{% extends "layout.html" %}

{% block main %}

<div class="container-fluid py-5 text-center">
    <script>
        function enable(){
            let type = document.querySelector("#type_select").value

            if (type == "teacher"){
                var new_select = document.createElement("input");
                const element = document.querySelector("#aditional");
                new_select.setAttribute("class" , "form-control mx-auto w-auto")
                new_select.setAttribute("name" , "subject")
                new_select.setAttribute("placeholder" , "what subject do you teach")
                new_select.setAttribute("type" , "text")
                new_select.setAttribute("id", "aditional_select")
                element.appendChild(new_select);
            }
            else if (type == "student"){
                const element = document.querySelector("#aditional_select");
                element.remove();
            }
            else {
                const button = document.querySelector("button")
                button.setAttribute("disabled","")
            }
        };
    </script>

    <form method="post">
        <div class="mb3">
            <input class="form-control mx-auto w-auto" name="name" placeholder="name" type="text"></input>
        </div>
        <div class="mb3">
            <input class="form-control mx-auto w-auto" name="password" placeholder="password" type="password"></input>
        </div>

        <div class="mb3">
            <input class="form-control mx-auto w-auto" name="password2" placeholder="password repeat" type="password"></input>
        </div>

        <div id="select" class="mb3">
            <select id="type_select" class="form-select mx-auto w-auto" name="type" onchange="enable()">
                <option disabled selected> who are you? </option>
                <option>teacher</option>
                <option>student</option>
            </select>
        </div>

        <div id="aditional" class="mb3"></div>

        {% if messege != 'OK' %}
        <p>{{messege}}</p>
        {% endif %}

        <button type="submit" class="btn btn-primary">register</button>
    </form>
</div>

{% endblock %}

